<div class="container mt-1"
     style="max-width:420px; background:#FFF1F2; min-height:100vh; padding-top:0; margin-top:0;">

  <!-- Page Header -->
  <div class="d-flex align-items-center pt-4 mb-3">

    <!-- Left: Back arrow → HOME -->
    <div style="width: 40px;">
      <button type="button"
              onclick="window.location.href='<%= root_path %>'"
              class="p-0 border-0 bg-transparent text-dark fs-4"
              style="outline:none;">
        <i class="bi bi-arrow-left"></i>
      </button>
    </div>

    <!-- Center: Title -->
    <div class="flex-grow-1 text-center">
      <h4 class="fw-bold mb-0">Accepted Blood Requests</h4>
    </div>

    <!-- Right spacer -->
    <div style="width: 40px;"></div>

  </div>

  <% if @blood_requests.any? %>

    <% @blood_requests.each do |r| %>

      <% status_label = {
        "pending" => "Pending",
        "accepted" => "Accepted",
        "completed" => "Completed"
      }[r.status] %>

      <% status_color = {
        "pending" => "#EC1B35",
        "accepted" => "#28A745",
        "completed" => "#e951cb"
      }[r.status] %>

      <%= link_to blood_request_path(r),
            class:"text-decoration-none card-hover",
            style:"color:inherit;" do %>

        <div class="card border-0 shadow-sm mb-4 accepted-card"
             style="background:white; border-radius:18px; max-width:360px; margin:0 auto; cursor:pointer; transition:all 0.15s ease;">

          <div class="card-body p-3">

            <div class="d-flex justify-content-between align-items-center mb-2">
              <span class="small fw-semibold" style="color:#EC1B35;">
                Request #<%= r.id %>
              </span>

              <span class="badge rounded-pill px-3 py-1"
                    style="background:<%= status_color %>; color:white;">
                <%= status_label %>
              </span>
            </div>

            <div class="d-flex align-items-center mb-2">

              <div class="d-flex justify-content-center align-items-center me-3"
                   style="width:55px; height:55px; background:#FFF1F2;
                          border-radius:50%; font-size:1.5rem; font-weight:700; color:#EC1B35;">
                <%= r.blood_type %>
              </div>

              <div class="flex-grow-1">

                <div class="fw-bold" style="font-size:1.1rem; color:#222;">
                  <%= r.patient_name %>
                </div>

                <div class="text-muted" style="font-size:0.9rem;">
                  <%= r.facility&.name %>
                </div>

                <div class="text-muted" style="font-size:0.9rem;">
                  Needed by: <%= r.needed_by.strftime('%d %b %Y') %>
                </div>

              </div>
            </div>

          </div>
        </div>

      <% end %>

    <% end %>

  <% else %>

    <p class="text-center text-muted mt-4">
      You haven’t accepted any blood requests yet.
    </p>

  <% end %>

</div>
